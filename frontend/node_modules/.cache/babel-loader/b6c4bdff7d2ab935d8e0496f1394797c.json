{"ast":null,"code":"var _jsxFileName = \"/home/ambri/Desktop/Dragon Tiger/frontend/src/components/Game.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport Table from \"./table/table\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Game = () => {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [gameSpec, setGameSpec] = useState({});\n  const [card, setCard] = useState(\"\");\n  const [bet, setBet] = useState(\"\");\n  const [target, setTarget] = useState(\"\");\n  const [dragonCard, setDragonCard] = useState(\"\");\n  const [tigerCard, setTigerCard] = useState(\"\");\n  const socket = useRef(null);\n\n  const handleChange = e => {\n    setCard(e.target.value);\n  };\n\n  const handleChangeBet = e => {\n    setBet(e.target.value);\n  };\n\n  const handleChangeTarget = e => {\n    setTarget(e.target.value);\n  };\n\n  useEffect(() => {\n    socket.current = io(\"http://localhost:8000\", {\n      path: \"/ws/socket.io\",\n      query: {\n        game_id: id\n      },\n      transports: [\"websocket\"]\n    });\n  }, []);\n  useEffect(() => {\n    socket.current.on(\"on_connect_data\", data => {\n      setGameSpec(data);\n    });\n  }, []);\n  useEffect(() => {\n    socket.current.on(\"send_dragon_card\", data => {\n      setDragonCard(data.card);\n    });\n  }, []);\n  useEffect(() => {\n    socket.current.on(\"send_tiger_card\", data => {\n      setTigerCard(data.card);\n    });\n  }, []);\n\n  const sendCard = e => {\n    e.preventDefault();\n    socket.current.emit(\"scan_card\", {\n      card: card,\n      game_round_id: gameSpec.game_round_id\n    });\n  };\n\n  const sendBet = e => {\n    e.preventDefault();\n    socket.current.emit(\"receive_bet\", {\n      bet: bet\n    });\n  };\n\n  const sendTarget = e => {\n    e.preventDefault();\n    socket.current.emit(\"receive_target\", {\n      target: target\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: /*#__PURE__*/_jsxDEV(Table, {\n      gameSpec: gameSpec,\n      sendCard: sendCard,\n      sendBet: sendBet,\n      card: card,\n      handleChange: handleChange,\n      handleChangeBet: handleChangeBet,\n      bet: bet,\n      handleChangeTarget: handleChangeTarget,\n      target: target,\n      sendTarget: sendTarget,\n      dragonCard: dragonCard,\n      tigerCard: tigerCard,\n      socket: socket,\n      start_timestamp: gameSpec.start_timestamp\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Game, \"x2tjH2UqPYpm+cE1+rati/PiHyw=\", false, function () {\n  return [useParams];\n});\n\n_c = Game;\nexport default Game;\n\nvar _c;\n\n$RefreshReg$(_c, \"Game\");","map":{"version":3,"sources":["/home/ambri/Desktop/Dragon Tiger/frontend/src/components/Game.js"],"names":["React","useEffect","useRef","useState","useParams","io","Table","Game","id","gameSpec","setGameSpec","card","setCard","bet","setBet","target","setTarget","dragonCard","setDragonCard","tigerCard","setTigerCard","socket","handleChange","e","value","handleChangeBet","handleChangeTarget","current","path","query","game_id","transports","on","data","sendCard","preventDefault","emit","game_round_id","sendBet","sendTarget","start_timestamp"],"mappings":"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","sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport io from \"socket.io-client\";\nimport Table from \"./table/table\";\n\nconst Game = () => {\n  const { id } = useParams();\n  const [gameSpec, setGameSpec] = useState({});\n  const [card, setCard] = useState(\"\");\n  const [bet, setBet] = useState(\"\");\n  const [target, setTarget] = useState(\"\");\n  const [dragonCard, setDragonCard] = useState(\"\")\n  const [tigerCard, setTigerCard] = useState(\"\")\n\n  const socket = useRef(null);\n\n  const handleChange = (e) => {\n    setCard(e.target.value);\n  };\n\n  const handleChangeBet = (e) => {\n    setBet(e.target.value);\n  };\n\n  const handleChangeTarget = (e) => {\n    setTarget(e.target.value);\n  };\n\n  useEffect(() => {\n    socket.current = io(\"http://localhost:8000\", {\n      path: \"/ws/socket.io\",\n      query: { game_id: id },\n      transports: [\"websocket\"],\n    });\n  }, []);\n\n  useEffect(() => {\n    socket.current.on(\"on_connect_data\", (data) => {\n      setGameSpec(data);\n    });\n  }, []);\n\n  useEffect(() => {\n    socket.current.on(\"send_dragon_card\", (data) => {\n      setDragonCard(data.card)\n    })\n  }, [])\n\n\n  useEffect(() => {\n    socket.current.on(\"send_tiger_card\", (data) => {\n      setTigerCard(data.card)\n    })\n  }, [])\n\n  const sendCard = (e) => {\n    e.preventDefault();\n    socket.current.emit(\"scan_card\", {\n      card: card,\n      game_round_id: gameSpec.game_round_id\n    });\n  };\n\n  const sendBet = (e) => {\n    e.preventDefault();\n    socket.current.emit(\"receive_bet\", {\n      bet: bet,\n    });\n  };\n\n  const sendTarget = (e) => {\n    e.preventDefault();\n    socket.current.emit(\"receive_target\", {\n      target: target,\n    });\n  };\n\n  return (\n    <div>\n      <Table\n        gameSpec={gameSpec}\n        sendCard={sendCard}\n        sendBet={sendBet}\n        card={card}\n        handleChange={handleChange}\n        handleChangeBet={handleChangeBet}\n        bet={bet}\n        handleChangeTarget={handleChangeTarget}\n        target={target}\n        sendTarget={sendTarget}\n        dragonCard={dragonCard}\n        tigerCard={tigerCard}\n        socket={socket}\n        start_timestamp={gameSpec.start_timestamp}\n      />\n    </div>\n  );\n};\n\nexport default Game;\n"]},"metadata":{},"sourceType":"module"}